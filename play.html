<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Caedrel Practice</title>
<style>
body {
  margin: 0;
  padding: 0;
  font-family: Arial, sans-serif;
  text-align: center;
  color: white;
  position: relative;
  height: 100vh;
  overflow: hidden;
}
#bgVideo, #bgMobileVideo {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: -2;
  pointer-events: none;
}
body::before {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.5);
  z-index: -1;
}
#container {
  position: relative;
  z-index: 1;
  padding-top: 50px;
}
#hpBar {
  width: 90%;
  max-width: 500px;
  height: 30px;
  background: rgba(0,0,0,0.5);
  margin: 20px auto;
  border-radius: 10px;
  overflow: hidden;
}
#hpFill {
  height: 100%;
  background: red;
  width: 100%;
  border-radius: 10px;
}
button {
  padding: 25px 40px;
  font-size: 24px;
  margin-top: 20px;
  cursor: pointer;
  border: none;
  border-radius: 10px;
  background-color: rgba(255,255,255,0.8);
  color: #333;
}
#result {
  font-size: 28px;
  margin-top: 20px;
  font-weight: bold;
  color: yellow;
}
#hpText {
  font-size: 20px;
  margin: 10px 0;
}
#winOverlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.9);
  z-index: 10;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  animation: flash 1s infinite alternate;
}
#winOverlay img {
  max-width: 400px;
  border-radius: 20px;
  box-shadow: 0 0 40px yellow;
  animation: pulse 1s infinite;
}
#winOverlay h1 {
  font-size: 40px;
  color: yellow;
  text-shadow: 0 0 20px red, 0 0 40px orange;
  animation: shake 0.3s infinite;
}
#restartButton {
  padding: 20px 35px;
  font-size: 22px;
  margin-top: 20px;
  cursor: pointer;
  border: none;
  border-radius: 10px;
  background-color: rgba(255,255,255,0.9);
  color: #333;
}
#restartText {
  margin-top: 15px;
  font-size: 22px;
  color: white;
}
@keyframes flash { from {background: rgba(0,0,0,0.7);} to {background: rgba(255,255,0,0.3);} }
@keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
@keyframes shake { 0% { transform: translate(0,0); } 25% { transform: translate(-5px,0); } 50% { transform: translate(5px,0); } 75% { transform: translate(-5px,0); } 100% { transform: translate(0,0); } }
</style>
</head>
<body>

<video autoplay muted loop playsinline id="bgVideo">
  <source src="https://i.imgur.com/6XtFFpe.mp4" type="video/mp4">
</video>
<div id="container">
  <h1>Caedrel Practice</h1>
  <p>Tap the button below or anywhere on the screen to cancel Malzahar's ult!</p>
  <div id="hpBar"><div id="hpFill"></div></div>
  <p id="hpText">Ezreal HP: 834</p>
  <button id="cancelButton">Cancel Ult!</button>
  <div id="result"></div>
</div>
<div id="winOverlay">
  <h1>WELCOME BACK, MASTER CAEDREL</h1>
  <img src="https://i.imgur.com/Dbhe4vG.jpeg" alt="Caedrel Face" />
  <button id="restartButton">Restart Game</button>
  <p id="restartText">press F/tap to try again</p>
</div>

<script>
function isMobile() { return /iPhone|iPad|iPod|Android/i.test(navigator.userAgent); }
window.addEventListener('DOMContentLoaded', () => {
  if(isMobile()){
    const video = document.getElementById('bgVideo'); video.parentNode.removeChild(video);
    const mobileVideo = document.createElement('video');
    mobileVideo.id = 'bgMobileVideo'; mobileVideo.src = 'https://i.imgur.com/6XtFFpe.mp4';
    mobileVideo.autoplay = true; mobileVideo.muted = true; mobileVideo.loop = true; mobileVideo.playsInline = true;
    mobileVideo.style.position = 'fixed'; mobileVideo.style.top = '0'; mobileVideo.style.left = '0';
    mobileVideo.style.width = '100%'; mobileVideo.style.height = '100%'; mobileVideo.style.objectFit = 'cover';
    mobileVideo.style.zIndex = '-2'; mobileVideo.style.pointerEvents = 'none'; document.body.appendChild(mobileVideo);
  }
});

let maxHP=834,currentHP=maxHP,gameOver=false,gameLoop,animationLock=false,lossSound=null;
let cancelButton=document.getElementById("cancelButton"),restartButton=document.getElementById("restartButton");

function updateBar(){
  let percent=(currentHP/maxHP)*100;
  document.getElementById("hpFill").style.width=percent+"%";
  document.getElementById("hpText").innerText="Ezreal HP: "+Math.max(0,Math.floor(currentHP));
}

function playCancelSound(){
  const audio=new Audio('https://peacejug.github.io/CaedrelPractice/cancel.mp3'); audio.volume=0.5; audio.play();
}

function endGame(message,isWin=false){
  if(animationLock) return;
  animationLock=true; gameOver=true;
  if(isWin){
    const winSound=new Audio('https://peacejug.github.io/CaedrelPractice/win.mp3'); winSound.volume=0.7; winSound.play();
    document.getElementById("winOverlay").style.display="flex";
  } else { document.getElementById("result").innerText=message+" | press F/tap to try again"; }
  clearInterval(gameLoop);
}

function cancelUlt(){
  if(gameOver) startGame();
  else { playCancelSound(); if(Math.floor(currentHP)===834) endGame("Welcome Back, Master Caedrel",true);
         else if(currentHP<834&&currentHP>0) endGame("YOU ARE NOT CAEDREL, TRAIN MORE"); }
}

function startGame(){
  if(lossSound){ lossSound.pause(); lossSound.currentTime=0; }
  currentHP=maxHP; gameOver=false; animationLock=false;
  document.getElementById("result").innerText="";
  document.getElementById("winOverlay").style.display="none"; updateBar();
  const bgVideo=document.getElementById('bgVideo')||document.getElementById('bgMobileVideo'); if(bgVideo){ bgVideo.currentTime=0; bgVideo.play(); }
  clearInterval(gameLoop);
  gameLoop=setInterval(()=>{
    if(gameOver){ clearInterval(gameLoop); return; }
    currentHP-=20; updateBar();
    if(currentHP<=0&&!gameOver){
      lossSound=new Audio('https://peacejug.github.io/CaedrelPractice/loss.mp3'); lossSound.volume=0.7; lossSound.play();
      endGame("YOU FAILED, EZREAL DIED AND YOU WON THE GAME");
    }
  },30);
}

// Controls
cancelButton.addEventListener('click', cancelUlt);
restartButton.addEventListener('click', startGame);
document.body.addEventListener('touchstart', () => { if(gameOver) startGame(); else cancelUlt(); });
document.addEventListener('keydown', e=>{ if(e.code==='Space') cancelUlt(); if(e.code==='KeyF'&&gameOver) startGame(); });

startGame();
</script>
</body>
</html>
